"use strict";var source=(()=>{var ai=Object.create;var ce=Object.defineProperty;var li=Object.getOwnPropertyDescriptor;var ui=Object.getOwnPropertyNames;var ci=Object.getPrototypeOf,di=Object.prototype.hasOwnProperty;var pi=(r,e)=>()=>(r&&(e=r(r=0)),e);var m=(r,e)=>()=>(e||r((e={exports:{}}).exports,e),e.exports),hi=(r,e)=>{for(var t in e)ce(r,t,{get:e[t],enumerable:!0})},st=(r,e,t,i)=>{if(e&&typeof e=="object"||typeof e=="function")for(let n of ui(e))!di.call(r,n)&&n!==t&&ce(r,n,{get:()=>e[n],enumerable:!(i=li(e,n))||i.enumerable});return r};var H=(r,e,t)=>(t=r!=null?ai(ci(r)):{},st(e||!r||!r.__esModule?ce(t,"default",{value:r,enumerable:!0}):t,r)),fi=r=>st(ce({},"__esModule",{value:!0}),r);var ut=m(de=>{"use strict";a();de.byteLength=mi;de.toByteArray=Si;de.fromByteArray=Ei;var B=[],F=[],gi=typeof Uint8Array<"u"?Uint8Array:Array,Ne="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/";for(Q=0,at=Ne.length;Q<at;++Q)B[Q]=Ne[Q],F[Ne.charCodeAt(Q)]=Q;var Q,at;F[45]=62;F[95]=63;function lt(r){var e=r.length;if(e%4>0)throw new Error("Invalid string. Length must be a multiple of 4");var t=r.indexOf("=");t===-1&&(t=e);var i=t===e?0:4-t%4;return[t,i]}function mi(r){var e=lt(r),t=e[0],i=e[1];return(t+i)*3/4-i}function yi(r,e,t){return(e+t)*3/4-t}function Si(r){var e,t=lt(r),i=t[0],n=t[1],o=new gi(yi(r,i,n)),s=0,u=n>0?i-4:i,c;for(c=0;c<u;c+=4)e=F[r.charCodeAt(c)]<<18|F[r.charCodeAt(c+1)]<<12|F[r.charCodeAt(c+2)]<<6|F[r.charCodeAt(c+3)],o[s++]=e>>16&255,o[s++]=e>>8&255,o[s++]=e&255;return n===2&&(e=F[r.charCodeAt(c)]<<2|F[r.charCodeAt(c+1)]>>4,o[s++]=e&255),n===1&&(e=F[r.charCodeAt(c)]<<10|F[r.charCodeAt(c+1)]<<4|F[r.charCodeAt(c+2)]>>2,o[s++]=e>>8&255,o[s++]=e&255),o}function wi(r){return B[r>>18&63]+B[r>>12&63]+B[r>>6&63]+B[r&63]}function bi(r,e,t){for(var i,n=[],o=e;o<t;o+=3)i=(r[o]<<16&16711680)+(r[o+1]<<8&65280)+(r[o+2]&255),n.push(wi(i));return n.join("")}function Ei(r){for(var e,t=r.length,i=t%3,n=[],o=16383,s=0,u=t-i;s<u;s+=o)n.push(bi(r,s,s+o>u?u:s+o));return i===1?(e=r[t-1],n.push(B[e>>2]+B[e<<4&63]+"==")):i===2&&(e=(r[t-2]<<8)+r[t-1],n.push(B[e>>10]+B[e>>4&63]+B[e<<2&63]+"=")),n.join("")}});var ct=m(Ce=>{a();Ce.read=function(r,e,t,i,n){var o,s,u=n*8-i-1,c=(1<<u)-1,p=c>>1,h=-7,g=t?n-1:0,R=t?-1:1,T=r[e+g];for(g+=R,o=T&(1<<-h)-1,T>>=-h,h+=u;h>0;o=o*256+r[e+g],g+=R,h-=8);for(s=o&(1<<-h)-1,o>>=-h,h+=i;h>0;s=s*256+r[e+g],g+=R,h-=8);if(o===0)o=1-p;else{if(o===c)return s?NaN:(T?-1:1)*(1/0);s=s+Math.pow(2,i),o=o-p}return(T?-1:1)*s*Math.pow(2,o-i)};Ce.write=function(r,e,t,i,n,o){var s,u,c,p=o*8-n-1,h=(1<<p)-1,g=h>>1,R=n===23?Math.pow(2,-24)-Math.pow(2,-77):0,T=i?0:o-1,y=i?1:-1,E=e<0||e===0&&1/e<0?1:0;for(e=Math.abs(e),isNaN(e)||e===1/0?(u=isNaN(e)?1:0,s=h):(s=Math.floor(Math.log(e)/Math.LN2),e*(c=Math.pow(2,-s))<1&&(s--,c*=2),s+g>=1?e+=R/c:e+=R*Math.pow(2,1-g),e*c>=2&&(s++,c/=2),s+g>=h?(u=0,s=h):s+g>=1?(u=(e*c-1)*Math.pow(2,n),s=s+g):(u=e*Math.pow(2,g-1)*Math.pow(2,n),s=0));n>=8;r[t+T]=u&255,T+=y,u/=256,n-=8);for(s=s<<n|u,p+=n;p>0;r[t+T]=s&255,T+=y,s/=256,p-=8);r[t+T-y]|=E*128}});var Rt=m(X=>{"use strict";a();var De=ut(),z=ct(),dt=typeof Symbol=="function"&&typeof Symbol.for=="function"?Symbol.for("nodejs.util.inspect.custom"):null;X.Buffer=l;X.SlowBuffer=Ri;X.INSPECT_MAX_BYTES=50;var pe=2147483647;X.kMaxLength=pe;l.TYPED_ARRAY_SUPPORT=Ii();!l.TYPED_ARRAY_SUPPORT&&typeof console<"u"&&typeof console.error=="function"&&console.error("This browser lacks typed array (Uint8Array) support which is required by `buffer` v5.x. Use `buffer` v4.x if you require old browser support.");function Ii(){try{let r=new Uint8Array(1),e={foo:function(){return 42}};return Object.setPrototypeOf(e,Uint8Array.prototype),Object.setPrototypeOf(r,e),r.foo()===42}catch{return!1}}Object.defineProperty(l.prototype,"parent",{enumerable:!0,get:function(){if(l.isBuffer(this))return this.buffer}});Object.defineProperty(l.prototype,"offset",{enumerable:!0,get:function(){if(l.isBuffer(this))return this.byteOffset}});function U(r){if(r>pe)throw new RangeError('The value "'+r+'" is invalid for option "size"');let e=new Uint8Array(r);return Object.setPrototypeOf(e,l.prototype),e}function l(r,e,t){if(typeof r=="number"){if(typeof e=="string")throw new TypeError('The "string" argument must be of type string. Received type number');return Ve(r)}return gt(r,e,t)}l.poolSize=8192;function gt(r,e,t){if(typeof r=="string")return Pi(r,e);if(ArrayBuffer.isView(r))return Ti(r);if(r==null)throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof r);if(k(r,ArrayBuffer)||r&&k(r.buffer,ArrayBuffer)||typeof SharedArrayBuffer<"u"&&(k(r,SharedArrayBuffer)||r&&k(r.buffer,SharedArrayBuffer)))return ke(r,e,t);if(typeof r=="number")throw new TypeError('The "value" argument must not be of type number. Received type number');let i=r.valueOf&&r.valueOf();if(i!=null&&i!==r)return l.from(i,e,t);let n=_i(r);if(n)return n;if(typeof Symbol<"u"&&Symbol.toPrimitive!=null&&typeof r[Symbol.toPrimitive]=="function")return l.from(r[Symbol.toPrimitive]("string"),e,t);throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof r)}l.from=function(r,e,t){return gt(r,e,t)};Object.setPrototypeOf(l.prototype,Uint8Array.prototype);Object.setPrototypeOf(l,Uint8Array);function mt(r){if(typeof r!="number")throw new TypeError('"size" argument must be of type number');if(r<0)throw new RangeError('The value "'+r+'" is invalid for option "size"')}function Ai(r,e,t){return mt(r),r<=0?U(r):e!==void 0?typeof t=="string"?U(r).fill(e,t):U(r).fill(e):U(r)}l.alloc=function(r,e,t){return Ai(r,e,t)};function Ve(r){return mt(r),U(r<0?0:$e(r)|0)}l.allocUnsafe=function(r){return Ve(r)};l.allocUnsafeSlow=function(r){return Ve(r)};function Pi(r,e){if((typeof e!="string"||e==="")&&(e="utf8"),!l.isEncoding(e))throw new TypeError("Unknown encoding: "+e);let t=yt(r,e)|0,i=U(t),n=i.write(r,e);return n!==t&&(i=i.slice(0,n)),i}function Be(r){let e=r.length<0?0:$e(r.length)|0,t=U(e);for(let i=0;i<e;i+=1)t[i]=r[i]&255;return t}function Ti(r){if(k(r,Uint8Array)){let e=new Uint8Array(r);return ke(e.buffer,e.byteOffset,e.byteLength)}return Be(r)}function ke(r,e,t){if(e<0||r.byteLength<e)throw new RangeError('"offset" is outside of buffer bounds');if(r.byteLength<e+(t||0))throw new RangeError('"length" is outside of buffer bounds');let i;return e===void 0&&t===void 0?i=new Uint8Array(r):t===void 0?i=new Uint8Array(r,e):i=new Uint8Array(r,e,t),Object.setPrototypeOf(i,l.prototype),i}function _i(r){if(l.isBuffer(r)){let e=$e(r.length)|0,t=U(e);return t.length===0||r.copy(t,0,0,e),t}if(r.length!==void 0)return typeof r.length!="number"||qe(r.length)?U(0):Be(r);if(r.type==="Buffer"&&Array.isArray(r.data))return Be(r.data)}function $e(r){if(r>=pe)throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+pe.toString(16)+" bytes");return r|0}function Ri(r){return+r!=r&&(r=0),l.alloc(+r)}l.isBuffer=function(e){return e!=null&&e._isBuffer===!0&&e!==l.prototype};l.compare=function(e,t){if(k(e,Uint8Array)&&(e=l.from(e,e.offset,e.byteLength)),k(t,Uint8Array)&&(t=l.from(t,t.offset,t.byteLength)),!l.isBuffer(e)||!l.isBuffer(t))throw new TypeError('The "buf1", "buf2" arguments must be one of type Buffer or Uint8Array');if(e===t)return 0;let i=e.length,n=t.length;for(let o=0,s=Math.min(i,n);o<s;++o)if(e[o]!==t[o]){i=e[o],n=t[o];break}return i<n?-1:n<i?1:0};l.isEncoding=function(e){switch(String(e).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}};l.concat=function(e,t){if(!Array.isArray(e))throw new TypeError('"list" argument must be an Array of Buffers');if(e.length===0)return l.alloc(0);let i;if(t===void 0)for(t=0,i=0;i<e.length;++i)t+=e[i].length;let n=l.allocUnsafe(t),o=0;for(i=0;i<e.length;++i){let s=e[i];if(k(s,Uint8Array))o+s.length>n.length?(l.isBuffer(s)||(s=l.from(s)),s.copy(n,o)):Uint8Array.prototype.set.call(n,s,o);else if(l.isBuffer(s))s.copy(n,o);else throw new TypeError('"list" argument must be an Array of Buffers');o+=s.length}return n};function yt(r,e){if(l.isBuffer(r))return r.length;if(ArrayBuffer.isView(r)||k(r,ArrayBuffer))return r.byteLength;if(typeof r!="string")throw new TypeError('The "string" argument must be one of type string, Buffer, or ArrayBuffer. Received type '+typeof r);let t=r.length,i=arguments.length>2&&arguments[2]===!0;if(!i&&t===0)return 0;let n=!1;for(;;)switch(e){case"ascii":case"latin1":case"binary":return t;case"utf8":case"utf-8":return Ue(r).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return t*2;case"hex":return t>>>1;case"base64":return _t(r).length;default:if(n)return i?-1:Ue(r).length;e=(""+e).toLowerCase(),n=!0}}l.byteLength=yt;function vi(r,e,t){let i=!1;if((e===void 0||e<0)&&(e=0),e>this.length||((t===void 0||t>this.length)&&(t=this.length),t<=0)||(t>>>=0,e>>>=0,t<=e))return"";for(r||(r="utf8");;)switch(r){case"hex":return ki(this,e,t);case"utf8":case"utf-8":return wt(this,e,t);case"ascii":return Di(this,e,t);case"latin1":case"binary":return Bi(this,e,t);case"base64":return Ni(this,e,t);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return Ui(this,e,t);default:if(i)throw new TypeError("Unknown encoding: "+r);r=(r+"").toLowerCase(),i=!0}}l.prototype._isBuffer=!0;function Y(r,e,t){let i=r[e];r[e]=r[t],r[t]=i}l.prototype.swap16=function(){let e=this.length;if(e%2!==0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(let t=0;t<e;t+=2)Y(this,t,t+1);return this};l.prototype.swap32=function(){let e=this.length;if(e%4!==0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(let t=0;t<e;t+=4)Y(this,t,t+3),Y(this,t+1,t+2);return this};l.prototype.swap64=function(){let e=this.length;if(e%8!==0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(let t=0;t<e;t+=8)Y(this,t,t+7),Y(this,t+1,t+6),Y(this,t+2,t+5),Y(this,t+3,t+4);return this};l.prototype.toString=function(){let e=this.length;return e===0?"":arguments.length===0?wt(this,0,e):vi.apply(this,arguments)};l.prototype.toLocaleString=l.prototype.toString;l.prototype.equals=function(e){if(!l.isBuffer(e))throw new TypeError("Argument must be a Buffer");return this===e?!0:l.compare(this,e)===0};l.prototype.inspect=function(){let e="",t=X.INSPECT_MAX_BYTES;return e=this.toString("hex",0,t).replace(/(.{2})/g,"$1 ").trim(),this.length>t&&(e+=" ... "),"<Buffer "+e+">"};dt&&(l.prototype[dt]=l.prototype.inspect);l.prototype.compare=function(e,t,i,n,o){if(k(e,Uint8Array)&&(e=l.from(e,e.offset,e.byteLength)),!l.isBuffer(e))throw new TypeError('The "target" argument must be one of type Buffer or Uint8Array. Received type '+typeof e);if(t===void 0&&(t=0),i===void 0&&(i=e?e.length:0),n===void 0&&(n=0),o===void 0&&(o=this.length),t<0||i>e.length||n<0||o>this.length)throw new RangeError("out of range index");if(n>=o&&t>=i)return 0;if(n>=o)return-1;if(t>=i)return 1;if(t>>>=0,i>>>=0,n>>>=0,o>>>=0,this===e)return 0;let s=o-n,u=i-t,c=Math.min(s,u),p=this.slice(n,o),h=e.slice(t,i);for(let g=0;g<c;++g)if(p[g]!==h[g]){s=p[g],u=h[g];break}return s<u?-1:u<s?1:0};function St(r,e,t,i,n){if(r.length===0)return-1;if(typeof t=="string"?(i=t,t=0):t>2147483647?t=2147483647:t<-2147483648&&(t=-2147483648),t=+t,qe(t)&&(t=n?0:r.length-1),t<0&&(t=r.length+t),t>=r.length){if(n)return-1;t=r.length-1}else if(t<0)if(n)t=0;else return-1;if(typeof e=="string"&&(e=l.from(e,i)),l.isBuffer(e))return e.length===0?-1:pt(r,e,t,i,n);if(typeof e=="number")return e=e&255,typeof Uint8Array.prototype.indexOf=="function"?n?Uint8Array.prototype.indexOf.call(r,e,t):Uint8Array.prototype.lastIndexOf.call(r,e,t):pt(r,[e],t,i,n);throw new TypeError("val must be string, number or Buffer")}function pt(r,e,t,i,n){let o=1,s=r.length,u=e.length;if(i!==void 0&&(i=String(i).toLowerCase(),i==="ucs2"||i==="ucs-2"||i==="utf16le"||i==="utf-16le")){if(r.length<2||e.length<2)return-1;o=2,s/=2,u/=2,t/=2}function c(h,g){return o===1?h[g]:h.readUInt16BE(g*o)}let p;if(n){let h=-1;for(p=t;p<s;p++)if(c(r,p)===c(e,h===-1?0:p-h)){if(h===-1&&(h=p),p-h+1===u)return h*o}else h!==-1&&(p-=p-h),h=-1}else for(t+u>s&&(t=s-u),p=t;p>=0;p--){let h=!0;for(let g=0;g<u;g++)if(c(r,p+g)!==c(e,g)){h=!1;break}if(h)return p}return-1}l.prototype.includes=function(e,t,i){return this.indexOf(e,t,i)!==-1};l.prototype.indexOf=function(e,t,i){return St(this,e,t,i,!0)};l.prototype.lastIndexOf=function(e,t,i){return St(this,e,t,i,!1)};function xi(r,e,t,i){t=Number(t)||0;let n=r.length-t;i?(i=Number(i),i>n&&(i=n)):i=n;let o=e.length;i>o/2&&(i=o/2);let s;for(s=0;s<i;++s){let u=parseInt(e.substr(s*2,2),16);if(qe(u))return s;r[t+s]=u}return s}function Li(r,e,t,i){return he(Ue(e,r.length-t),r,t,i)}function Oi(r,e,t,i){return he(qi(e),r,t,i)}function Mi(r,e,t,i){return he(_t(e),r,t,i)}function Fi(r,e,t,i){return he(Gi(e,r.length-t),r,t,i)}l.prototype.write=function(e,t,i,n){if(t===void 0)n="utf8",i=this.length,t=0;else if(i===void 0&&typeof t=="string")n=t,i=this.length,t=0;else if(isFinite(t))t=t>>>0,isFinite(i)?(i=i>>>0,n===void 0&&(n="utf8")):(n=i,i=void 0);else throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");let o=this.length-t;if((i===void 0||i>o)&&(i=o),e.length>0&&(i<0||t<0)||t>this.length)throw new RangeError("Attempt to write outside buffer bounds");n||(n="utf8");let s=!1;for(;;)switch(n){case"hex":return xi(this,e,t,i);case"utf8":case"utf-8":return Li(this,e,t,i);case"ascii":case"latin1":case"binary":return Oi(this,e,t,i);case"base64":return Mi(this,e,t,i);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return Fi(this,e,t,i);default:if(s)throw new TypeError("Unknown encoding: "+n);n=(""+n).toLowerCase(),s=!0}};l.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};function Ni(r,e,t){return e===0&&t===r.length?De.fromByteArray(r):De.fromByteArray(r.slice(e,t))}function wt(r,e,t){t=Math.min(r.length,t);let i=[],n=e;for(;n<t;){let o=r[n],s=null,u=o>239?4:o>223?3:o>191?2:1;if(n+u<=t){let c,p,h,g;switch(u){case 1:o<128&&(s=o);break;case 2:c=r[n+1],(c&192)===128&&(g=(o&31)<<6|c&63,g>127&&(s=g));break;case 3:c=r[n+1],p=r[n+2],(c&192)===128&&(p&192)===128&&(g=(o&15)<<12|(c&63)<<6|p&63,g>2047&&(g<55296||g>57343)&&(s=g));break;case 4:c=r[n+1],p=r[n+2],h=r[n+3],(c&192)===128&&(p&192)===128&&(h&192)===128&&(g=(o&15)<<18|(c&63)<<12|(p&63)<<6|h&63,g>65535&&g<1114112&&(s=g))}}s===null?(s=65533,u=1):s>65535&&(s-=65536,i.push(s>>>10&1023|55296),s=56320|s&1023),i.push(s),n+=u}return Ci(i)}var ht=4096;function Ci(r){let e=r.length;if(e<=ht)return String.fromCharCode.apply(String,r);let t="",i=0;for(;i<e;)t+=String.fromCharCode.apply(String,r.slice(i,i+=ht));return t}function Di(r,e,t){let i="";t=Math.min(r.length,t);for(let n=e;n<t;++n)i+=String.fromCharCode(r[n]&127);return i}function Bi(r,e,t){let i="";t=Math.min(r.length,t);for(let n=e;n<t;++n)i+=String.fromCharCode(r[n]);return i}function ki(r,e,t){let i=r.length;(!e||e<0)&&(e=0),(!t||t<0||t>i)&&(t=i);let n="";for(let o=e;o<t;++o)n+=Hi[r[o]];return n}function Ui(r,e,t){let i=r.slice(e,t),n="";for(let o=0;o<i.length-1;o+=2)n+=String.fromCharCode(i[o]+i[o+1]*256);return n}l.prototype.slice=function(e,t){let i=this.length;e=~~e,t=t===void 0?i:~~t,e<0?(e+=i,e<0&&(e=0)):e>i&&(e=i),t<0?(t+=i,t<0&&(t=0)):t>i&&(t=i),t<e&&(t=e);let n=this.subarray(e,t);return Object.setPrototypeOf(n,l.prototype),n};function x(r,e,t){if(r%1!==0||r<0)throw new RangeError("offset is not uint");if(r+e>t)throw new RangeError("Trying to access beyond buffer length")}l.prototype.readUintLE=l.prototype.readUIntLE=function(e,t,i){e=e>>>0,t=t>>>0,i||x(e,t,this.length);let n=this[e],o=1,s=0;for(;++s<t&&(o*=256);)n+=this[e+s]*o;return n};l.prototype.readUintBE=l.prototype.readUIntBE=function(e,t,i){e=e>>>0,t=t>>>0,i||x(e,t,this.length);let n=this[e+--t],o=1;for(;t>0&&(o*=256);)n+=this[e+--t]*o;return n};l.prototype.readUint8=l.prototype.readUInt8=function(e,t){return e=e>>>0,t||x(e,1,this.length),this[e]};l.prototype.readUint16LE=l.prototype.readUInt16LE=function(e,t){return e=e>>>0,t||x(e,2,this.length),this[e]|this[e+1]<<8};l.prototype.readUint16BE=l.prototype.readUInt16BE=function(e,t){return e=e>>>0,t||x(e,2,this.length),this[e]<<8|this[e+1]};l.prototype.readUint32LE=l.prototype.readUInt32LE=function(e,t){return e=e>>>0,t||x(e,4,this.length),(this[e]|this[e+1]<<8|this[e+2]<<16)+this[e+3]*16777216};l.prototype.readUint32BE=l.prototype.readUInt32BE=function(e,t){return e=e>>>0,t||x(e,4,this.length),this[e]*16777216+(this[e+1]<<16|this[e+2]<<8|this[e+3])};l.prototype.readBigUInt64LE=q(function(e){e=e>>>0,K(e,"offset");let t=this[e],i=this[e+7];(t===void 0||i===void 0)&&re(e,this.length-8);let n=t+this[++e]*2**8+this[++e]*2**16+this[++e]*2**24,o=this[++e]+this[++e]*2**8+this[++e]*2**16+i*2**24;return BigInt(n)+(BigInt(o)<<BigInt(32))});l.prototype.readBigUInt64BE=q(function(e){e=e>>>0,K(e,"offset");let t=this[e],i=this[e+7];(t===void 0||i===void 0)&&re(e,this.length-8);let n=t*2**24+this[++e]*2**16+this[++e]*2**8+this[++e],o=this[++e]*2**24+this[++e]*2**16+this[++e]*2**8+i;return(BigInt(n)<<BigInt(32))+BigInt(o)});l.prototype.readIntLE=function(e,t,i){e=e>>>0,t=t>>>0,i||x(e,t,this.length);let n=this[e],o=1,s=0;for(;++s<t&&(o*=256);)n+=this[e+s]*o;return o*=128,n>=o&&(n-=Math.pow(2,8*t)),n};l.prototype.readIntBE=function(e,t,i){e=e>>>0,t=t>>>0,i||x(e,t,this.length);let n=t,o=1,s=this[e+--n];for(;n>0&&(o*=256);)s+=this[e+--n]*o;return o*=128,s>=o&&(s-=Math.pow(2,8*t)),s};l.prototype.readInt8=function(e,t){return e=e>>>0,t||x(e,1,this.length),this[e]&128?(255-this[e]+1)*-1:this[e]};l.prototype.readInt16LE=function(e,t){e=e>>>0,t||x(e,2,this.length);let i=this[e]|this[e+1]<<8;return i&32768?i|4294901760:i};l.prototype.readInt16BE=function(e,t){e=e>>>0,t||x(e,2,this.length);let i=this[e+1]|this[e]<<8;return i&32768?i|4294901760:i};l.prototype.readInt32LE=function(e,t){return e=e>>>0,t||x(e,4,this.length),this[e]|this[e+1]<<8|this[e+2]<<16|this[e+3]<<24};l.prototype.readInt32BE=function(e,t){return e=e>>>0,t||x(e,4,this.length),this[e]<<24|this[e+1]<<16|this[e+2]<<8|this[e+3]};l.prototype.readBigInt64LE=q(function(e){e=e>>>0,K(e,"offset");let t=this[e],i=this[e+7];(t===void 0||i===void 0)&&re(e,this.length-8);let n=this[e+4]+this[e+5]*2**8+this[e+6]*2**16+(i<<24);return(BigInt(n)<<BigInt(32))+BigInt(t+this[++e]*2**8+this[++e]*2**16+this[++e]*2**24)});l.prototype.readBigInt64BE=q(function(e){e=e>>>0,K(e,"offset");let t=this[e],i=this[e+7];(t===void 0||i===void 0)&&re(e,this.length-8);let n=(t<<24)+this[++e]*2**16+this[++e]*2**8+this[++e];return(BigInt(n)<<BigInt(32))+BigInt(this[++e]*2**24+this[++e]*2**16+this[++e]*2**8+i)});l.prototype.readFloatLE=function(e,t){return e=e>>>0,t||x(e,4,this.length),z.read(this,e,!0,23,4)};l.prototype.readFloatBE=function(e,t){return e=e>>>0,t||x(e,4,this.length),z.read(this,e,!1,23,4)};l.prototype.readDoubleLE=function(e,t){return e=e>>>0,t||x(e,8,this.length),z.read(this,e,!0,52,8)};l.prototype.readDoubleBE=function(e,t){return e=e>>>0,t||x(e,8,this.length),z.read(this,e,!1,52,8)};function O(r,e,t,i,n,o){if(!l.isBuffer(r))throw new TypeError('"buffer" argument must be a Buffer instance');if(e>n||e<o)throw new RangeError('"value" argument is out of bounds');if(t+i>r.length)throw new RangeError("Index out of range")}l.prototype.writeUintLE=l.prototype.writeUIntLE=function(e,t,i,n){if(e=+e,t=t>>>0,i=i>>>0,!n){let u=Math.pow(2,8*i)-1;O(this,e,t,i,u,0)}let o=1,s=0;for(this[t]=e&255;++s<i&&(o*=256);)this[t+s]=e/o&255;return t+i};l.prototype.writeUintBE=l.prototype.writeUIntBE=function(e,t,i,n){if(e=+e,t=t>>>0,i=i>>>0,!n){let u=Math.pow(2,8*i)-1;O(this,e,t,i,u,0)}let o=i-1,s=1;for(this[t+o]=e&255;--o>=0&&(s*=256);)this[t+o]=e/s&255;return t+i};l.prototype.writeUint8=l.prototype.writeUInt8=function(e,t,i){return e=+e,t=t>>>0,i||O(this,e,t,1,255,0),this[t]=e&255,t+1};l.prototype.writeUint16LE=l.prototype.writeUInt16LE=function(e,t,i){return e=+e,t=t>>>0,i||O(this,e,t,2,65535,0),this[t]=e&255,this[t+1]=e>>>8,t+2};l.prototype.writeUint16BE=l.prototype.writeUInt16BE=function(e,t,i){return e=+e,t=t>>>0,i||O(this,e,t,2,65535,0),this[t]=e>>>8,this[t+1]=e&255,t+2};l.prototype.writeUint32LE=l.prototype.writeUInt32LE=function(e,t,i){return e=+e,t=t>>>0,i||O(this,e,t,4,4294967295,0),this[t+3]=e>>>24,this[t+2]=e>>>16,this[t+1]=e>>>8,this[t]=e&255,t+4};l.prototype.writeUint32BE=l.prototype.writeUInt32BE=function(e,t,i){return e=+e,t=t>>>0,i||O(this,e,t,4,4294967295,0),this[t]=e>>>24,this[t+1]=e>>>16,this[t+2]=e>>>8,this[t+3]=e&255,t+4};function bt(r,e,t,i,n){Tt(e,i,n,r,t,7);let o=Number(e&BigInt(4294967295));r[t++]=o,o=o>>8,r[t++]=o,o=o>>8,r[t++]=o,o=o>>8,r[t++]=o;let s=Number(e>>BigInt(32)&BigInt(4294967295));return r[t++]=s,s=s>>8,r[t++]=s,s=s>>8,r[t++]=s,s=s>>8,r[t++]=s,t}function Et(r,e,t,i,n){Tt(e,i,n,r,t,7);let o=Number(e&BigInt(4294967295));r[t+7]=o,o=o>>8,r[t+6]=o,o=o>>8,r[t+5]=o,o=o>>8,r[t+4]=o;let s=Number(e>>BigInt(32)&BigInt(4294967295));return r[t+3]=s,s=s>>8,r[t+2]=s,s=s>>8,r[t+1]=s,s=s>>8,r[t]=s,t+8}l.prototype.writeBigUInt64LE=q(function(e,t=0){return bt(this,e,t,BigInt(0),BigInt("0xffffffffffffffff"))});l.prototype.writeBigUInt64BE=q(function(e,t=0){return Et(this,e,t,BigInt(0),BigInt("0xffffffffffffffff"))});l.prototype.writeIntLE=function(e,t,i,n){if(e=+e,t=t>>>0,!n){let c=Math.pow(2,8*i-1);O(this,e,t,i,c-1,-c)}let o=0,s=1,u=0;for(this[t]=e&255;++o<i&&(s*=256);)e<0&&u===0&&this[t+o-1]!==0&&(u=1),this[t+o]=(e/s>>0)-u&255;return t+i};l.prototype.writeIntBE=function(e,t,i,n){if(e=+e,t=t>>>0,!n){let c=Math.pow(2,8*i-1);O(this,e,t,i,c-1,-c)}let o=i-1,s=1,u=0;for(this[t+o]=e&255;--o>=0&&(s*=256);)e<0&&u===0&&this[t+o+1]!==0&&(u=1),this[t+o]=(e/s>>0)-u&255;return t+i};l.prototype.writeInt8=function(e,t,i){return e=+e,t=t>>>0,i||O(this,e,t,1,127,-128),e<0&&(e=255+e+1),this[t]=e&255,t+1};l.prototype.writeInt16LE=function(e,t,i){return e=+e,t=t>>>0,i||O(this,e,t,2,32767,-32768),this[t]=e&255,this[t+1]=e>>>8,t+2};l.prototype.writeInt16BE=function(e,t,i){return e=+e,t=t>>>0,i||O(this,e,t,2,32767,-32768),this[t]=e>>>8,this[t+1]=e&255,t+2};l.prototype.writeInt32LE=function(e,t,i){return e=+e,t=t>>>0,i||O(this,e,t,4,2147483647,-2147483648),this[t]=e&255,this[t+1]=e>>>8,this[t+2]=e>>>16,this[t+3]=e>>>24,t+4};l.prototype.writeInt32BE=function(e,t,i){return e=+e,t=t>>>0,i||O(this,e,t,4,2147483647,-2147483648),e<0&&(e=4294967295+e+1),this[t]=e>>>24,this[t+1]=e>>>16,this[t+2]=e>>>8,this[t+3]=e&255,t+4};l.prototype.writeBigInt64LE=q(function(e,t=0){return bt(this,e,t,-BigInt("0x8000000000000000"),BigInt("0x7fffffffffffffff"))});l.prototype.writeBigInt64BE=q(function(e,t=0){return Et(this,e,t,-BigInt("0x8000000000000000"),BigInt("0x7fffffffffffffff"))});function It(r,e,t,i,n,o){if(t+i>r.length)throw new RangeError("Index out of range");if(t<0)throw new RangeError("Index out of range")}function At(r,e,t,i,n){return e=+e,t=t>>>0,n||It(r,e,t,4,34028234663852886e22,-34028234663852886e22),z.write(r,e,t,i,23,4),t+4}l.prototype.writeFloatLE=function(e,t,i){return At(this,e,t,!0,i)};l.prototype.writeFloatBE=function(e,t,i){return At(this,e,t,!1,i)};function Pt(r,e,t,i,n){return e=+e,t=t>>>0,n||It(r,e,t,8,17976931348623157e292,-17976931348623157e292),z.write(r,e,t,i,52,8),t+8}l.prototype.writeDoubleLE=function(e,t,i){return Pt(this,e,t,!0,i)};l.prototype.writeDoubleBE=function(e,t,i){return Pt(this,e,t,!1,i)};l.prototype.copy=function(e,t,i,n){if(!l.isBuffer(e))throw new TypeError("argument should be a Buffer");if(i||(i=0),!n&&n!==0&&(n=this.length),t>=e.length&&(t=e.length),t||(t=0),n>0&&n<i&&(n=i),n===i||e.length===0||this.length===0)return 0;if(t<0)throw new RangeError("targetStart out of bounds");if(i<0||i>=this.length)throw new RangeError("Index out of range");if(n<0)throw new RangeError("sourceEnd out of bounds");n>this.length&&(n=this.length),e.length-t<n-i&&(n=e.length-t+i);let o=n-i;return this===e&&typeof Uint8Array.prototype.copyWithin=="function"?this.copyWithin(t,i,n):Uint8Array.prototype.set.call(e,this.subarray(i,n),t),o};l.prototype.fill=function(e,t,i,n){if(typeof e=="string"){if(typeof t=="string"?(n=t,t=0,i=this.length):typeof i=="string"&&(n=i,i=this.length),n!==void 0&&typeof n!="string")throw new TypeError("encoding must be a string");if(typeof n=="string"&&!l.isEncoding(n))throw new TypeError("Unknown encoding: "+n);if(e.length===1){let s=e.charCodeAt(0);(n==="utf8"&&s<128||n==="latin1")&&(e=s)}}else typeof e=="number"?e=e&255:typeof e=="boolean"&&(e=Number(e));if(t<0||this.length<t||this.length<i)throw new RangeError("Out of range index");if(i<=t)return this;t=t>>>0,i=i===void 0?this.length:i>>>0,e||(e=0);let o;if(typeof e=="number")for(o=t;o<i;++o)this[o]=e;else{let s=l.isBuffer(e)?e:l.from(e,n),u=s.length;if(u===0)throw new TypeError('The value "'+e+'" is invalid for argument "value"');for(o=0;o<i-t;++o)this[o+t]=s[o%u]}return this};var W={};function je(r,e,t){W[r]=class extends t{constructor(){super(),Object.defineProperty(this,"message",{value:e.apply(this,arguments),writable:!0,configurable:!0}),this.name=`${this.name} [${r}]`,this.stack,delete this.name}get code(){return r}set code(n){Object.defineProperty(this,"code",{configurable:!0,enumerable:!0,value:n,writable:!0})}toString(){return`${this.name} [${r}]: ${this.message}`}}}je("ERR_BUFFER_OUT_OF_BOUNDS",function(r){return r?`${r} is outside of buffer bounds`:"Attempt to access memory outside buffer bounds"},RangeError);je("ERR_INVALID_ARG_TYPE",function(r,e){return`The "${r}" argument must be of type number. Received type ${typeof e}`},TypeError);je("ERR_OUT_OF_RANGE",function(r,e,t){let i=`The value of "${r}" is out of range.`,n=t;return Number.isInteger(t)&&Math.abs(t)>2**32?n=ft(String(t)):typeof t=="bigint"&&(n=String(t),(t>BigInt(2)**BigInt(32)||t<-(BigInt(2)**BigInt(32)))&&(n=ft(n)),n+="n"),i+=` It must be ${e}. Received ${n}`,i},RangeError);function ft(r){let e="",t=r.length,i=r[0]==="-"?1:0;for(;t>=i+4;t-=3)e=`_${r.slice(t-3,t)}${e}`;return`${r.slice(0,t)}${e}`}function Vi(r,e,t){K(e,"offset"),(r[e]===void 0||r[e+t]===void 0)&&re(e,r.length-(t+1))}function Tt(r,e,t,i,n,o){if(r>t||r<e){let s=typeof e=="bigint"?"n":"",u;throw o>3?e===0||e===BigInt(0)?u=`>= 0${s} and < 2${s} ** ${(o+1)*8}${s}`:u=`>= -(2${s} ** ${(o+1)*8-1}${s}) and < 2 ** ${(o+1)*8-1}${s}`:u=`>= ${e}${s} and <= ${t}${s}`,new W.ERR_OUT_OF_RANGE("value",u,r)}Vi(i,n,o)}function K(r,e){if(typeof r!="number")throw new W.ERR_INVALID_ARG_TYPE(e,"number",r)}function re(r,e,t){throw Math.floor(r)!==r?(K(r,t),new W.ERR_OUT_OF_RANGE(t||"offset","an integer",r)):e<0?new W.ERR_BUFFER_OUT_OF_BOUNDS:new W.ERR_OUT_OF_RANGE(t||"offset",`>= ${t?1:0} and <= ${e}`,r)}var $i=/[^+/0-9A-Za-z-_]/g;function ji(r){if(r=r.split("=")[0],r=r.trim().replace($i,""),r.length<2)return"";for(;r.length%4!==0;)r=r+"=";return r}function Ue(r,e){e=e||1/0;let t,i=r.length,n=null,o=[];for(let s=0;s<i;++s){if(t=r.charCodeAt(s),t>55295&&t<57344){if(!n){if(t>56319){(e-=3)>-1&&o.push(239,191,189);continue}else if(s+1===i){(e-=3)>-1&&o.push(239,191,189);continue}n=t;continue}if(t<56320){(e-=3)>-1&&o.push(239,191,189),n=t;continue}t=(n-55296<<10|t-56320)+65536}else n&&(e-=3)>-1&&o.push(239,191,189);if(n=null,t<128){if((e-=1)<0)break;o.push(t)}else if(t<2048){if((e-=2)<0)break;o.push(t>>6|192,t&63|128)}else if(t<65536){if((e-=3)<0)break;o.push(t>>12|224,t>>6&63|128,t&63|128)}else if(t<1114112){if((e-=4)<0)break;o.push(t>>18|240,t>>12&63|128,t>>6&63|128,t&63|128)}else throw new Error("Invalid code point")}return o}function qi(r){let e=[];for(let t=0;t<r.length;++t)e.push(r.charCodeAt(t)&255);return e}function Gi(r,e){let t,i,n,o=[];for(let s=0;s<r.length&&!((e-=2)<0);++s)t=r.charCodeAt(s),i=t>>8,n=t%256,o.push(n),o.push(i);return o}function _t(r){return De.toByteArray(ji(r))}function he(r,e,t,i){let n;for(n=0;n<i&&!(n+t>=e.length||n>=r.length);++n)e[n+t]=r[n];return n}function k(r,e){return r instanceof e||r!=null&&r.constructor!=null&&r.constructor.name!=null&&r.constructor.name===e.name}function qe(r){return r!==r}var Hi=function(){let r="0123456789abcdef",e=new Array(256);for(let t=0;t<16;++t){let i=t*16;for(let n=0;n<16;++n)e[i+n]=r[t]+r[n]}return e}();function q(r){return typeof BigInt>"u"?Qi:r}function Qi(){throw new Error("BigInt not supported")}});var f,a=pi(()=>{f=Rt().Buffer});var vt=m(fe=>{"use strict";a();Object.defineProperty(fe,"__esModule",{value:!0});fe.Form=void 0;var Ge=class{reloadForm(){let e=this.__underlying_formId;e&&Application.formDidChange(e)}get requiresExplicitSubmission(){return!1}};fe.Form=Ge});var xt=m(N=>{"use strict";a();Object.defineProperty(N,"__esModule",{value:!0});N.LabelRow=Yi;N.InputRow=Ji;N.StepperRow=Wi;N.ToggleRow=zi;N.SelectRow=Ki;N.ButtonRow=Xi;N.WebViewRow=Zi;N.NavigationRow=en;N.OAuthButtonRow=tn;N.DeferredItem=rn;function Yi(r,e){return{...e,id:r,type:"labelRow",isHidden:e.isHidden??!1}}function Ji(r,e){return{...e,id:r,type:"inputRow",isHidden:e.isHidden??!1}}function Wi(r,e){return{...e,id:r,type:"stepperRow",isHidden:e.isHidden??!1}}function zi(r,e){return{...e,id:r,type:"toggleRow",isHidden:e.isHidden??!1}}function Ki(r,e){return{...e,id:r,type:"selectRow",isHidden:e.isHidden??!1}}function Xi(r,e){return{...e,id:r,type:"buttonRow",isHidden:e.isHidden??!1}}function Zi(r,e){return{...e,id:r,type:"webViewRow",isHidden:e.isHidden??!1}}function en(r,e){return{...e,id:r,type:"navigationRow",isHidden:e.isHidden??!1}}function tn(r,e){return{...e,id:r,type:"oauthButtonRow",isHidden:e.isHidden??!1}}function rn(r){return r()}});var Lt=m(He=>{"use strict";a();Object.defineProperty(He,"__esModule",{value:!0});He.Section=nn;function nn(r,e){let t;return typeof r=="string"?t={id:r}:t=r,{...t,items:e.filter(i=>i)}}});var Ot=m(V=>{"use strict";a();var on=V&&V.__createBinding||(Object.create?function(r,e,t,i){i===void 0&&(i=t);var n=Object.getOwnPropertyDescriptor(e,t);(!n||("get"in n?!e.__esModule:n.writable||n.configurable))&&(n={enumerable:!0,get:function(){return e[t]}}),Object.defineProperty(r,i,n)}:function(r,e,t,i){i===void 0&&(i=t),r[i]=e[t]}),Qe=V&&V.__exportStar||function(r,e){for(var t in r)t!=="default"&&!Object.prototype.hasOwnProperty.call(e,t)&&on(e,r,t)};Object.defineProperty(V,"__esModule",{value:!0});Qe(vt(),V);Qe(xt(),V);Qe(Lt(),V)});var Ft=m(Mt=>{"use strict";a();Object.defineProperty(Mt,"__esModule",{value:!0})});var Ct=m(Nt=>{"use strict";a();Object.defineProperty(Nt,"__esModule",{value:!0})});var Bt=m(Dt=>{"use strict";a();Object.defineProperty(Dt,"__esModule",{value:!0})});var Ut=m(kt=>{"use strict";a();Object.defineProperty(kt,"__esModule",{value:!0})});var $t=m(Vt=>{"use strict";a();Object.defineProperty(Vt,"__esModule",{value:!0})});var qt=m(jt=>{"use strict";a();Object.defineProperty(jt,"__esModule",{value:!0})});var Ht=m(Gt=>{"use strict";a();Object.defineProperty(Gt,"__esModule",{value:!0})});var Yt=m(Qt=>{"use strict";a();Object.defineProperty(Qt,"__esModule",{value:!0})});var Jt=m(M=>{"use strict";a();var sn=M&&M.__createBinding||(Object.create?function(r,e,t,i){i===void 0&&(i=t);var n=Object.getOwnPropertyDescriptor(e,t);(!n||("get"in n?!e.__esModule:n.writable||n.configurable))&&(n={enumerable:!0,get:function(){return e[t]}}),Object.defineProperty(r,i,n)}:function(r,e,t,i){i===void 0&&(i=t),r[i]=e[t]}),G=M&&M.__exportStar||function(r,e){for(var t in r)t!=="default"&&!Object.prototype.hasOwnProperty.call(e,t)&&sn(e,r,t)};Object.defineProperty(M,"__esModule",{value:!0});G(Ft(),M);G(Ct(),M);G(Bt(),M);G(Ut(),M);G($t(),M);G(qt(),M);G(Ht(),M);G(Yt(),M)});var zt=m(Wt=>{"use strict";a();Object.defineProperty(Wt,"__esModule",{value:!0})});var me=m(ge=>{"use strict";a();Object.defineProperty(ge,"__esModule",{value:!0});ge.PaperbackInterceptor=void 0;var Ye=class{id;constructor(e){this.id=e}registerInterceptor(){Application.registerInterceptor(this.id,Application.Selector(this,"interceptRequest"),Application.Selector(this,"interceptResponse"))}unregisterInterceptor(){Application.unregisterInterceptor(this.id)}};ge.PaperbackInterceptor=Ye});var Xt=m(Kt=>{"use strict";a();Object.defineProperty(Kt,"__esModule",{value:!0})});var er=m(Zt=>{"use strict";a();Object.defineProperty(Zt,"__esModule",{value:!0})});var tr=m(J=>{"use strict";a();Object.defineProperty(J,"__esModule",{value:!0});J.unlock=J.lock=void 0;var ye={},Je={},an=async r=>{if(ye[r]){await ye[r],await(0,J.lock)(r);return}ye[r]=new Promise(e=>Je[r]=()=>{delete ye[r],e()})};J.lock=an;var ln=r=>{Je[r]&&Je[r]()};J.unlock=ln});var ir=m(Se=>{"use strict";a();Object.defineProperty(Se,"__esModule",{value:!0});Se.BasicRateLimiter=void 0;var rr=tr(),un=me(),We=class extends un.PaperbackInterceptor{options;promise;currentRequestsMade=0;lastReset=Date.now();imageRegex=new RegExp(/\.(png|gif|jpeg|jpg|webp)(\?|$)/i);constructor(e,t){super(e),this.options=t}async interceptRequest(e){return this.options.ignoreImages&&this.imageRegex.test(e.url)||(await(0,rr.lock)(this.id),await this.incrementRequestCount(),(0,rr.unlock)(this.id)),e}async interceptResponse(e,t,i){return i}async incrementRequestCount(){if(await this.promise,(Date.now()-this.lastReset)/1e3>this.options.bufferInterval&&(this.currentRequestsMade=0,this.lastReset=Date.now()),this.currentRequestsMade+=1,this.currentRequestsMade>=this.options.numberOfRequests){let t=(Date.now()-this.lastReset)/1e3;if(t<=this.options.bufferInterval){let i=this.options.bufferInterval-t;console.log(`[BasicRateLimiter] rate limit hit, sleeping for ${i}`),this.promise=Application.sleep(i)}}}};Se.BasicRateLimiter=We});var nr=m(we=>{"use strict";a();Object.defineProperty(we,"__esModule",{value:!0});we.CloudflareError=void 0;var ze=class extends Error{resolutionRequest;type="cloudflareError";constructor(e,t="Cloudflare bypass is required"){super(t),this.resolutionRequest=e}};we.CloudflareError=ze});var Ze=m(ie=>{"use strict";a();Object.defineProperty(ie,"__esModule",{value:!0});ie.URL=void 0;ie.parseURL=Ke;function Ke(r){let e={},t=/^(?:([a-zA-Z][a-zA-Z\d+\-.]*):)?(?:\/\/([^\/?#]*))?([^?#]*)(?:\?([^#]*))?(?:#(.*))?$/,i=r.match(t);if(!i)throw new Error("Invalid URL string provided.");if(i[1]!==void 0&&i[1]!==""&&(e.protocol=i[1]),i[2]!==void 0&&i[2]!==""){let n=i[2],o="",s="",u=n.indexOf("@");if(u!==-1){if(o=n.substring(0,u),s=n.substring(u+1),o!==""){let c=o.indexOf(":");c!==-1?(e.username=o.substring(0,c),e.password=o.substring(c+1)):(e.username=o,e.password="")}}else s=n;if(s!=="")if(s.startsWith("[")){let c=s.indexOf("]");if(c===-1)throw new Error("Invalid IPv6 address in URL update.");e.hostname=s.substring(0,c+1);let p=s.substring(c+1);p.startsWith(":")&&(e.port=p.substring(1))}else{let c=s.lastIndexOf(":");c!==-1&&s.indexOf(":")===c?(e.hostname=s.substring(0,c),e.port=s.substring(c+1)):(e.hostname=s,e.port="")}}if(i[3]!==void 0&&i[3]!==""&&(e.path=i[3].startsWith("/")?i[3]:`/${i[3]}`),i[4]!==void 0){let n={},o=i[4].split("&");for(let s of o){if(!s)continue;let[u,c=""]=s.split("="),p=decodeURIComponent(u),h=decodeURIComponent(c);if(p in n){let g=n[p];Array.isArray(g)?g.push(h):n[p]=[g,h]}else n[p]=h}e.queryItems=n}return i[5]!==void 0&&(e.fragment=i[5]),e}var Xe=class{protocol;hostname;path;username;password;port;queryItems={};fragment;constructor(e){let t=Ke(e);if(!t.hostname||!t.protocol)throw new Error("URL Hostname and Protocol are required");this.hostname=t.hostname,this.protocol=t.protocol,this.path=t.path??"",this.username=t.username,this.password=t.password,this.port=t.port,this.queryItems=t.queryItems,this.fragment=t.fragment}toString(){let e=`${this.protocol}://`;if(this.username!==void 0&&this.username!==""&&(e+=this.username,this.password!==void 0&&this.password!==""&&(e+=`:${this.password}`),e+="@"),e+=this.hostname,this.port!==void 0&&this.port!==""&&(e+=`:${this.port}`),this.path!==""&&(e+=this.path.startsWith("/")?this.path:`/${this.path}`),this.queryItems!==void 0){let t=Object.keys(this.queryItems),i=[];if(t.length>0)for(let n of t){let o=this.queryItems[n];if(Array.isArray(o))for(let s of o)i.push(`${encodeURIComponent(n)}=${encodeURIComponent(s)}`);else i.push(`${encodeURIComponent(n)}=${encodeURIComponent(o)}`)}e+=`?${i.join("&")}`}return this.fragment!==void 0&&(e+=`#${this.fragment}`),e}setProtocol(e){if(e==="")throw new Error("Protocol is required");return this.protocol=e,this}setUsername(e){return e===""?this.username=void 0:this.username=e,this}setPassword(e){return e===""?this.password=void 0:this.password=e,this}setHostname(e){if(e==="")throw new Error("Hostname is required");return this.hostname=e,this}setPort(e){return e===""?this.port=void 0:this.port=e,this}setPath(e){return this.path=e.startsWith("/")?e:`/${e}`,this}addPathComponent(e){return this.path=(this.path??"")+(e.startsWith("/")?e:`/${e}`),this}setQueryItems(e){return this.queryItems=e,this}setQueryItem(e,t){return this.queryItems===void 0&&(this.queryItems={}),this.queryItems[e]=t,this}removeQueryItem(e){return delete this.queryItems?.[e],this}setFragment(e){return this.fragment=e,this}update(e){let t;return typeof e=="string"?t=Ke(e):t=e,t.protocol!==void 0&&this.setProtocol(t.protocol),t.username!==void 0&&this.setUsername(t.username),t.password!==void 0&&this.setPassword(t.password),t.hostname!==void 0&&this.setHostname(t.hostname),t.port!==void 0&&this.setPort(t.port),t.path!==void 0&&this.setPath(t.path),t.queryItems!==void 0&&this.setQueryItems(t.queryItems),t.fragment!==void 0&&this.setFragment(t.fragment),this}};ie.URL=Xe});var sr=m(be=>{"use strict";a();Object.defineProperty(be,"__esModule",{value:!0});be.CookieStorageInterceptor=void 0;var cn=me(),dn=Ze(),or="cookie_store_cookies",et=class extends cn.PaperbackInterceptor{options;_cookies={};get cookies(){return Object.freeze(Object.values(this._cookies))}set cookies(e){let t={};for(let i of e)this.isCookieExpired(i)||(t[this.cookieIdentifier(i)]=i);this._cookies=t,this.saveCookiesToStorage()}constructor(e){super("cookie_store"),this.options=e,this.loadCookiesFromStorage()}async interceptRequest(e){return e.cookies={...e.cookies??{},...this.cookiesForUrl(e.url).reduce((t,i)=>(t[i.name]=i.value,t),{})},e}async interceptResponse(e,t,i){let n=this._cookies;for(let o of t.cookies){let s=this.cookieIdentifier(o);if(this.isCookieExpired(o)){delete n[s];continue}n[s]=o}return this._cookies=n,this.saveCookiesToStorage(),i}setCookie(e){this.isCookieExpired(e)||(this._cookies[this.cookieIdentifier(e)]=e,this.saveCookiesToStorage())}deleteCookie(e){delete this._cookies[this.cookieIdentifier(e)]}cookiesForUrl(e){console.log("[COMPAT] COOKIES FOR URL");let t=new dn.URL(e),i=t.hostname;if(!i)return[];let n={},o=t.path.startsWith("/")?t.path:`/${t.path}`,s=i.split("."),u=o.split("/");u.shift();let c=this.cookies;for(let p of c){if(this.isCookieExpired(p)){delete this._cookies[this.cookieIdentifier(p)];continue}let g=this.cookieSanitizedDomain(p).split(".");if(s.length<g.length||g.length==0)continue;let R=!0;for(let d=0;d<g.length;d++){let w=g.length-1-d,_=s.length-1-d;if(g[w]!=s[_]){R=!1;break}}if(!R)continue;let T=this.cookieSanitizedPath(p),y=T.split("/");y.shift();let E=0;if(o===T)E=Number.MAX_SAFE_INTEGER;else if(y.length===0||T==="/")E=1;else if(o.startsWith(T)&&u.length>=y.length)for(let d=0;d<y.length&&y[d]===u[d];d++)E+=1;E<=0||(n[p.name]?.pathMatches??0)<E&&(n[p.name]={cookie:p,pathMatches:E})}return Object.values(n).map(p=>p.cookie)}cookieIdentifier(e){return`${e.name}-${this.cookieSanitizedDomain(e)}-${this.cookieSanitizedPath(e)}`}cookieSanitizedPath(e){return e.path?.startsWith("/")?e.path:"/"+(e.path??"")}cookieSanitizedDomain(e){return e.domain.replace(/^(www)?\.?/gi,"").toLowerCase()}isCookieExpired(e){return!!(e.expires&&e.expires.getTime()<=Date.now())}loadCookiesFromStorage(){if(this.options.storage=="memory")return;let e=Application.getState(or);if(!e){this._cookies={};return}let t={};for(let i of e)!i.expires||this.isCookieExpired(i)||(t[this.cookieIdentifier(i)]=i);this._cookies=t}saveCookiesToStorage(){this.options.storage!="memory"&&Application.setState(this.cookies.filter(e=>e.expires),or)}};be.CookieStorageInterceptor=et});var ar=m(rt=>{"use strict";a();Object.defineProperty(rt,"__esModule",{value:!0});rt.createFormState=pn;var tt=class{form;_value;_selector;constructor(e,t){this.form=e,this._value=t,this._selector=Application.Selector(this,"updateValue")}get value(){return this._value}get selector(){return this._selector}async updateValue(e){this._value=e,this.form.reloadForm()}};function pn(r,e){let t=new tt(r,e);return[()=>t.value,t.updateValue.bind(t),t.selector]}});var lr=m(L=>{"use strict";a();var hn=L&&L.__createBinding||(Object.create?function(r,e,t,i){i===void 0&&(i=t);var n=Object.getOwnPropertyDescriptor(e,t);(!n||("get"in n?!e.__esModule:n.writable||n.configurable))&&(n={enumerable:!0,get:function(){return e[t]}}),Object.defineProperty(r,i,n)}:function(r,e,t,i){i===void 0&&(i=t),r[i]=e[t]}),C=L&&L.__exportStar||function(r,e){for(var t in r)t!=="default"&&!Object.prototype.hasOwnProperty.call(e,t)&&hn(e,r,t)};Object.defineProperty(L,"__esModule",{value:!0});C(Ot(),L);C(Jt(),L);C(zt(),L);C(me(),L);C(Xt(),L);C(er(),L);C(ir(),L);C(nr(),L);C(sr(),L);C(ar(),L);C(Ze(),L)});var cr=m(ur=>{"use strict";a();Object.defineProperty(ur,"__esModule",{value:!0})});var pr=m(dr=>{"use strict";a();Object.defineProperty(dr,"__esModule",{value:!0})});var fr=m(hr=>{"use strict";a();Object.defineProperty(hr,"__esModule",{value:!0})});var mr=m(gr=>{"use strict";a();Object.defineProperty(gr,"__esModule",{value:!0})});var Sr=m(Ee=>{"use strict";a();Object.defineProperty(Ee,"__esModule",{value:!0});Ee.DiscoverSectionType=void 0;var yr;(function(r){r[r.featured=0]="featured",r[r.simpleCarousel=1]="simpleCarousel",r[r.prominentCarousel=2]="prominentCarousel",r[r.chapterUpdates=3]="chapterUpdates",r[r.genres=4]="genres"})(yr||(Ee.DiscoverSectionType=yr={}))});var br=m(wr=>{"use strict";a();Object.defineProperty(wr,"__esModule",{value:!0})});var Ir=m(Er=>{"use strict";a();Object.defineProperty(Er,"__esModule",{value:!0})});var Pr=m(Ar=>{"use strict";a();Object.defineProperty(Ar,"__esModule",{value:!0})});var Tr=m(Ie=>{"use strict";a();Object.defineProperty(Ie,"__esModule",{value:!0});Ie.EndOfPageResults=void 0;Ie.EndOfPageResults=Object.freeze({items:[],metadata:void 0})});var Rr=m(_r=>{"use strict";a();Object.defineProperty(_r,"__esModule",{value:!0})});var xr=m(vr=>{"use strict";a();Object.defineProperty(vr,"__esModule",{value:!0})});var Or=m(Lr=>{"use strict";a();Object.defineProperty(Lr,"__esModule",{value:!0})});var Fr=m(Mr=>{"use strict";a();Object.defineProperty(Mr,"__esModule",{value:!0})});var Cr=m(Nr=>{"use strict";a();Object.defineProperty(Nr,"__esModule",{value:!0})});var Br=m(Dr=>{"use strict";a();Object.defineProperty(Dr,"__esModule",{value:!0})});var Ur=m(kr=>{"use strict";a();Object.defineProperty(kr,"__esModule",{value:!0})});var jr=m(Z=>{"use strict";a();Object.defineProperty(Z,"__esModule",{value:!0});Z.ContentRating=Z.SourceIntents=void 0;var Vr;(function(r){r[r.MANGA_CHAPTERS=1]="MANGA_CHAPTERS",r[r.MANGA_TRACKING=2]="MANGA_TRACKING",r[r.MANGA_PROGRESS=2]="MANGA_PROGRESS",r[r.HOMEPAGE_SECTIONS=4]="HOMEPAGE_SECTIONS",r[r.DISCOVER_SECIONS=4]="DISCOVER_SECIONS",r[r.COLLECTION_MANAGEMENT=8]="COLLECTION_MANAGEMENT",r[r.CLOUDFLARE_BYPASS_REQUIRED=16]="CLOUDFLARE_BYPASS_REQUIRED",r[r.SETTINGS_UI=32]="SETTINGS_UI",r[r.MANGA_SEARCH=64]="MANGA_SEARCH"})(Vr||(Z.SourceIntents=Vr={}));var $r;(function(r){r.EVERYONE="SAFE",r.MATURE="MATURE",r.ADULT="ADULT"})($r||(Z.ContentRating=$r={}))});var Gr=m(qr=>{"use strict";a();Object.defineProperty(qr,"__esModule",{value:!0})});var Qr=m(Hr=>{"use strict";a();Object.defineProperty(Hr,"__esModule",{value:!0})});var Jr=m(Yr=>{"use strict";a();Object.defineProperty(Yr,"__esModule",{value:!0})});var zr=m(Wr=>{"use strict";a();Object.defineProperty(Wr,"__esModule",{value:!0})});var Xr=m(Kr=>{"use strict";a();Object.defineProperty(Kr,"__esModule",{value:!0})});var $=m(b=>{"use strict";a();var fn=b&&b.__createBinding||(Object.create?function(r,e,t,i){i===void 0&&(i=t);var n=Object.getOwnPropertyDescriptor(e,t);(!n||("get"in n?!e.__esModule:n.writable||n.configurable))&&(n={enumerable:!0,get:function(){return e[t]}}),Object.defineProperty(r,i,n)}:function(r,e,t,i){i===void 0&&(i=t),r[i]=e[t]}),A=b&&b.__exportStar||function(r,e){for(var t in r)t!=="default"&&!Object.prototype.hasOwnProperty.call(e,t)&&fn(e,r,t)};Object.defineProperty(b,"__esModule",{value:!0});A(lr(),b);A(cr(),b);A(pr(),b);A(fr(),b);A(mr(),b);A(Sr(),b);A(br(),b);A($(),b);A(Ir(),b);A(Pr(),b);A(Tr(),b);A(Rr(),b);A(xr(),b);A(Or(),b);A(Fr(),b);A(Cr(),b);A(Br(),b);A(Ur(),b);A(jr(),b);A(Gr(),b);A(Qr(),b);A(Jr(),b);A(zr(),b);A(Xr(),b)});var yn={};hi(yn,{AniList:()=>mn,AniListExtension:()=>ue});a();var si=H($(),1);a();var ee=H($(),1);a();var Ae=`
query Query(
  $page: Int
  $isAdult: Boolean
  $onList: Boolean
  $countryOfOrigin: CountryCode
  $isLicensed: Boolean
  $search: String
  $startDateGreater: FuzzyDateInt
  $startDateLesser: FuzzyDateInt
  $formatIn: [MediaFormat]
  $formatNotIn: [MediaFormat]
  $statusIn: [MediaStatus]
  $statusNotIn: [MediaStatus]
  $chaptersGreater: Int
  $chaptersLesser: Int
  $volumesGreater: Int
  $volumesLesser: Int
  $genreIn: [String]
  $genreNotIn: [String]
  $tagIn: [String]
  $tagNotIn: [String]
  $sourceIn: [MediaSource]
  $sort: [MediaSort]
) {
  Page(page: $page, perPage: 50) {
    pageInfo {
      hasNextPage
    }
    media(
      type: MANGA
      isAdult: $isAdult
      onList: $onList
      countryOfOrigin: $countryOfOrigin
      isLicensed: $isLicensed
      search: $search
      startDate_greater: $startDateGreater
      startDate_lesser: $startDateLesser
      format_in: $formatIn
      format_not_in: $formatNotIn
      status_in: $statusIn
      status_not_in: $statusNotIn
      chapters_greater: $chaptersGreater
      chapters_lesser: $chaptersLesser
      volumes_greater: $volumesGreater
      volumes_lesser: $volumesLesser
      genre_in: $genreIn
      genre_not_in: $genreNotIn
      tag_in: $tagIn
      tag_not_in: $tagNotIn
      source_in: $sourceIn
      sort: $sort
    ) {
      chapters
      coverImage {
        extraLarge
        large
        medium
      }
      format
      genres
      id
      isAdult
      status
      title {
        english
        native
        romaji
      }
      volumes
      synonyms
    }
  }
}
`;a();var ne={JP:{id:"JP",label:"Japan"},KR:{id:"KR",label:"South Korea"},CN:{id:"CN",label:"China"},TW:{id:"TW",label:"Taiwan"}},D={MANGA:{id:"MANGA",label:"Manga"},NOVEL:{id:"NOVEL",label:"Novel"},ONE_SHOT:{id:"ONE_SHOT",label:"One Shot"}},P={FINISHED:{id:"FINISHED",label:"Finished"},RELEASING:{id:"RELEASING",label:"Releasing"},NOT_YET_RELEASED:{id:"NOT_YET_RELEASED",label:"Not Yet Released"},CANCELLED:{id:"CANCELLED",label:"Cancelled"},HIATUS:{id:"HIATUS",label:"Hiatus"}},j={SEARCH_MATCH:{id:"SEARCH_MATCH",label:"Search Match"},ID:{id:"ID",label:"Id \u2191"},ID_DESC:{id:"ID_DESC",label:"Id \u2193"},TITLE_ROMAJI:{id:"TITLE_ROMAJI",label:"Title Romaji \u2191"},TITLE_ROMAJI_DESC:{id:"TITLE_ROMAJI_DESC",label:"Title Romaji \u2193"},TITLE_ENGLISH:{id:"TITLE_ENGLISH",label:"Title English \u2191"},TITLE_ENGLISH_DESC:{id:"TITLE_ENGLISH_DESC",label:"Title English \u2193"},TITLE_NATIVE:{id:"TITLE_NATIVE",label:"Title Native \u2191"},TITLE_NATIVE_DESC:{id:"TITLE_NATIVE_DESC",label:"Title Native \u2193"},FORMAT:{id:"FORMAT",label:"Format \u2191"},FORMAT_DESC:{id:"FORMAT_DESC",label:"Format \u2193"},START_DATE:{id:"START_DATE",label:"Start Date \u2191"},START_DATE_DESC:{id:"START_DATE_DESC",label:"Start Date \u2193"},END_DATE:{id:"END_DATE",label:"End Date \u2191"},END_DATE_DESC:{id:"END_DATE_DESC",label:"End Date \u2193"},SCORE:{id:"SCORE",label:"Score \u2191"},SCORE_DESC:{id:"SCORE_DESC",label:"Score \u2193"},POPULARITY:{id:"POPULARITY",label:"Popularity \u2191"},POPULARITY_DESC:{id:"POPULARITY_DESC",label:"Popularity \u2193"},TRENDING:{id:"TRENDING",label:"Trending \u2191"},TRENDING_DESC:{id:"TRENDING_DESC",label:"Trending \u2193"},STATUS:{id:"STATUS",label:"Status \u2191"},STATUS_DESC:{id:"STATUS_DESC",label:"Status \u2193"},CHAPTERS:{id:"CHAPTERS",label:"Chapters \u2191"},CHAPTERS_DESC:{id:"CHAPTERS_DESC",label:"Chapters \u2193"},VOLUMES:{id:"VOLUMES",label:"Volumes \u2191"},VOLUMES_DESC:{id:"VOLUMES_DESC",label:"Volumes \u2193"},UPDATED_AT:{id:"UPDATED_AT",label:"Updated At \u2191"},UPDATED_AT_DESC:{id:"UPDATED_AT_DESC",label:"Updated At \u2193"},FAVOURITES:{id:"FAVOURITES",label:"Favourites \u2191"},FAVOURITES_DESC:{id:"FAVOURITES_DESC",label:"Favourites \u2193"}};var Zr={ORIGINAL:{id:"ORIGINAL",label:"Original"},MANGA:{id:"MANGA",label:"Manga"},LIGHT_NOVEL:{id:"LIGHT_NOVEL",label:"Light Novel"},WEB_NOVEL:{id:"WEB_NOVEL",label:"Web Novel"},NOVEL:{id:"NOVEL",label:"Novel"},Anime:{id:"ANIME",label:"Anime"},VISUAL_NOVEL:{id:"VISUAL_NOVEL",label:"Visual Novel"},VIDEO_GAME:{id:"VIDEO_GAME",label:"Video Game"},DOUJINSHI:{id:"DOUJINSHI",label:"Doujinshi"},COMIC:{id:"COMIC",label:"Comic"},LIVE_ACTION:{id:"LIVE_ACTION",label:"Live Action"},GAME:{id:"GAME",label:"Game"},MULTIMEDIA_PROJECT:{id:"MULTIMEDIA_PROJECT",label:"Multimedia Project"},PICTURE_BOOK:{id:"PICTURE_BOOK",label:"Picture Book"},OTHER:{id:"OTHER",label:"Other"}};a();var Te=H($(),1);a();var gn="https://graphql.anilist.co";async function v(r,e,t){let i={url:gn,method:"POST",headers:{"Content-Type":"application/json",Accept:"application/json"},body:JSON.stringify({query:r,variables:t})};if(e){let p=String(Application.getSecureState("session"));if(p==null)throw new Error("You are not authenticated, please log in through the AniList settings");let h=JSON.parse(f.from(p.split(".")[1],"base64").toString());if(Number(h.exp)<new Date().valueOf()/1e3)throw Application.setSecureState(null,"session"),Application.setState(null,"viewer-id"),Application.setState(null,"viewer-advanced-scoring"),Application.setState(null,"viewer-list-order"),Application.setState(null,"viewer-custom-lists"),Application.setState(null,"viewer-split-completed-list-by-format"),Application.setState(null,"viewer-advanced-scoring-enabled"),new Error("Your authorization token has expired, please log back in through the AniList settings");i.headers.Authorization="Bearer "+p}let[n,o]=await Application.scheduleRequest(i),s=Application.arrayBufferToUTF8String(o),u=JSON.parse(s);if(u==null||typeof u!="object"||!("data"in u||"error"in u))throw new Error(`Failed to parse JSON object: ${String(u)}`);let c=u;if(c.errors!=null){let p="";for(let h=0;h<c.errors.length;h++)h!=0&&(p+=`
`),p+=`AniList returned an error: [${c.errors[h].status}] ${c.errors[h].message}`;throw new Error(p)}return c.data}a();var I=H($(),1);a();var it=`
query Query {
  Viewer {
    avatar {
      large
    }
    createdAt
    id
    name
    mediaListOptions {
      rowOrder
      scoreFormat
      mangaList {
        advancedScoringEnabled
        advancedScoring
        customLists
        splitCompletedSectionByFormat
        sectionOrder
      }
    }
    options {
      activityMergeTime
      disabledListActivity {
        disabled
        type
      }
      displayAdultContent
      staffNameLanguage
      titleLanguage
    }
  }
}
`;function oe(){return Application.getState("setting-synonyms-in-titles")}var Pe=class extends I.Form{getSections(){return Application.getSecureState("session")==null?[(0,I.Section)("no-session",[this.loginButton()])]:[(0,I.Section)("session",[this.profileViewNavigation(),this.logOutButton()]),(0,I.Section)("settings",[this.synonymsToggle()])]}loginButton(){let e={title:"Log In",subtitle:"Log in to AniList to automatically sync your library and reading progress.",onSuccess:Application.Selector(this,"handleLoginSuccess"),authorizeEndpoint:"https://anilist.co/api/v2/oauth/authorize?client_id=6621&response_type=token",responseType:{type:"token"},clientId:"6621"};return(0,I.OAuthButtonRow)("login",e)}profileViewNavigation(){let e={title:"View Profile",form:new nt};return(0,I.NavigationRow)("profile-view",e)}logOutButton(){let e={title:"Log Out",onSelect:Application.Selector(this,"logOut")};return(0,I.ButtonRow)("log-out",e)}synonymsToggle(){let e={title:"Display title synonyms if the title is not in English",value:oe()??!1,onValueChange:Application.Selector(this,"handleSynonymsToggle")};return(0,I.ToggleRow)("synonyms",e)}async handleSynonymsToggle(e){Application.setState(e,"setting-synonyms-in-titles"),Application.invalidateDiscoverSections(),this.reloadForm()}async handleLoginSuccess(e){Application.setSecureState(e,"session");let t=await v(it,!0);Application.setState(t.Viewer.id,"viewer-id"),Application.setState(JSON.stringify(t.Viewer.mediaListOptions.mangaList.advancedScoring),"viewer-advanced-scoring"),Application.setState(JSON.stringify(t.Viewer.mediaListOptions.mangaList.sectionOrder),"viewer-list-order"),Application.setState(JSON.stringify(t.Viewer.mediaListOptions.mangaList.customLists),"viewer-custom-lists"),Application.setState(String(t.Viewer.mediaListOptions.mangaList.splitCompletedSectionByFormat),"viewer-split-completed-list-by-format"),Application.setState(String(t.Viewer.mediaListOptions.mangaList.advancedScoringEnabled),"viewer-advanced-scoring-enabled"),this.reloadForm()}async logOut(){Application.setSecureState(null,"session"),Application.setState(null,"viewer-id"),Application.setState(null,"viewer-advanced-scoring"),Application.setState(null,"viewer-list-order"),Application.setState(null,"viewer-custom-lists"),Application.setState(null,"viewer-split-completed-list-by-format"),Application.setState(null,"viewer-advanced-scoring-enabled"),this.reloadForm()}},nt=class extends I.Form{loadRequest;viewer;error;formWillAppear(){this.loadRequest=v(it,!0).then(e=>{this.viewer=e}).catch(e=>{this.error=e}).finally(()=>{this.reloadForm()})}getSections(){return this.viewer==null&&this.error==null?[(0,I.Section)("loading",[(0,I.LabelRow)("loading",{title:"Loading..."})])]:this.error!=null?[(0,I.Section)("error",[(0,I.LabelRow)("error",{title:"Error",subtitle:this.error.toString()})])]:[this.getProfileSection(this.viewer),this.getSessionSection()]}getProfileSection(e){let t=new Date(0);t.setUTCSeconds(e.Viewer.createdAt);let i=[(0,I.LabelRow)("username-id",{title:"Username",value:e.Viewer.name,subtitle:"Id: "+e.Viewer.id.toString()}),(0,I.LabelRow)("creation-date",{title:"Creation Date",value:t.toLocaleString()})];return(0,I.Section)({id:"profile-data",header:"Profile"},i)}getSessionSection(){let e=String(Application.getSecureState("session")),t=JSON.parse(f.from(e.split(".")[1],"base64").toString()),i=[];for(let[n,o]of Object.entries(t)){let s={title:n};n=="jti"?s.subtitle=String(o):s.value=String(o)||"Undefined",i.push((0,I.LabelRow)(n,s))}return(0,I.Section)({id:"session-data",header:"Session"},i)}};async function _e(r,e,t,i){let n=[],o=await v(r,t,e),s=o.Page.media;for(let u of s){let c="";switch(u.format){case"NOVEL":c+="("+D.NOVEL.label+") ";break;case"ONE_SHOT":c+="("+D.ONE_SHOT.label+") "}c+=u.title.english??u.title.romaji??u.title.native??"No Title",oe()==!0&&u.synonyms.length>0&&!u.title.english&&(c+=" / "+u.synonyms[0]);let p=u.isAdult?Te.ContentRating.ADULT:u.genres.some(g=>g=="ecchi")?Te.ContentRating.MATURE:Te.ContentRating.EVERYONE,h;switch(u.status){case P.FINISHED.id:{if(!u.chapters&&!u.volumes){h=P.FINISHED.label;break}h=[u.chapters?"Chs. "+u.chapters.toString():"",u.volumes?"Vols. "+u.volumes.toString():""].join(" ");break}case P.NOT_YET_RELEASED.id:h=P.NOT_YET_RELEASED.label;break;case P.CANCELLED.id:h=P.CANCELLED.label;break;case P.HIATUS.id:h=P.HIATUS.label;break;case P.RELEASING.id:h=P.RELEASING.label}n.push({mangaId:u.id.toString(),title:c,imageUrl:u.coverImage.large,contentRating:p,subtitle:h})}return i=o.Page.pageInfo.hasNextPage?(i??1)+1:void 0,{items:n,metadata:i}}function ei(r,e){e.forEach(t=>{Object.getOwnPropertyNames(t.prototype).forEach(i=>{Object.defineProperty(r.prototype,i,Object.getOwnPropertyDescriptor(t.prototype,i)||Object.create(null))})})}var Re=class{async getDiscoverSections(){let e={id:"trending-now",title:"Trending Now",type:ee.DiscoverSectionType.featured},t={id:"all-time-popular",title:"All Time Popular",type:ee.DiscoverSectionType.prominentCarousel},i={id:"popular-manga",title:"Popular Manga",type:ee.DiscoverSectionType.simpleCarousel},n={id:"popular-manhwa",title:"Popular Manhwa",type:ee.DiscoverSectionType.simpleCarousel},o={id:"top-100-manga",title:"Top 100 Manga",type:ee.DiscoverSectionType.prominentCarousel};return[e,t,i,n,o]}async getDiscoverSectionItems(e,t){let i,n;switch(e.id){case"trending-now":i=j.TRENDING_DESC.id;break;case"all-time-popular":i=j.POPULARITY_DESC.id;break;case"popular-manga":i=j.POPULARITY_DESC.id,n=ne.JP.id;break;case"popular-manhwa":i=j.POPULARITY_DESC.id,n=ne.KR.id;break;case"top-100-manga":i=j.SCORE_DESC.id;break}return _e(Ae,{page:t??1,sort:i,countryOfOrigin:n},!1,t)}};a();var ve=H($(),1);a();var ti=`
query Query($id: Int) {
  Media(id: $id) {
    averageScore
    bannerImage
    coverImage {
      extraLarge
      large
      medium
    }
    description
    format
    genres
    isAdult
    staff {
      edges {
        node {
          name {
            full
          }
        }
        role
      }
    }
    status
    tags {
      id
      name
    }
    title {
      english
      native
      romaji
    }
    synonyms
  }
}
`;var te=class{async getMangaDetails(e){let t={id:Number(e)},n=(await v(ti,!1,t)).Media,o=n.description?n.description.replaceAll(/<br>|<i>|<\/i>|<a.*?>|<\/a>/g,""):"No description";o+=n.synonyms.length>0?`

Synonyms: `+n.synonyms.toLocaleString().replaceAll(",",", ")+`

`:"";let s=[];for(let _ of Object.values(n.title))_!=null&&s.push(_);for(let _ of n.synonyms)s.push(_);let u=n.title.english??n.title.romaji??n.title.native??"No Title";oe()==!0&&n.synonyms.length>0&&!n.title.english&&(u+=`
`+n.synonyms[0]);let c;switch(n.status){case P.FINISHED.id:c=P.FINISHED.label;break;case P.NOT_YET_RELEASED.id:c=P.NOT_YET_RELEASED.label;break;case P.CANCELLED.id:c=P.CANCELLED.label;break;case P.HIATUS.id:c=P.HIATUS.label;break;case P.RELEASING.id:c=P.RELEASING.label}let p,h;for(let _ of n.staff.edges){if(_.role.startsWith("Story & Art")){p=_.node.name.full,h=void 0;break}if(!p&&(_.role.startsWith("Story")||_.role.startsWith("Original Story"))&&(p=_.node.name.full,p&&h)||_.role.startsWith("Art")&&(h=_.node.name.full,p&&h))break}let g=n.averageScore?n.averageScore/100:void 0,R=[];for(let _ of n.genres)R.push({id:_.replaceAll(" ","_").toLowerCase(),title:_});let T=[];for(let _ of n.tags)R.push({id:_.id.toString().replaceAll(" ","_").toLowerCase(),title:_.name});let y=[{id:"genres",title:"Genres",tags:R},{id:"tags",title:"Tags",tags:T}],E=n.isAdult?ve.ContentRating.ADULT:R.some(_=>_.id=="ecchi")?ve.ContentRating.MATURE:ve.ContentRating.EVERYONE,d=[n.coverImage.extraLarge];n.bannerImage!=null&&d.push(n.bannerImage);let w={Format:n.format==D.MANGA.id?D.MANGA.label:n.format==D.NOVEL.id?D.NOVEL.label:D.ONE_SHOT.label};return{mangaId:e,mangaInfo:{thumbnailUrl:n.coverImage.extraLarge,synopsis:o,primaryTitle:u,secondaryTitles:s,contentRating:E,status:c,artist:h,author:p,bannerUrl:n.bannerImage??void 0,rating:g,tagGroups:y,artworkUrls:d,shareUrl:"https://anilist.co/manga/"+e,additionalInfo:w}}}};a();a();var se=`
query Query($userId: Int, $mediaId: Int) {
  MediaList(userId: $userId, mediaId: $mediaId) {
    advancedScores
    completedAt {
      day
      month
      year
    }
    createdAt
    customLists
    hiddenFromStatusLists
    id
    notes
    private
    progress
    progressVolumes
    repeat
    score
    startedAt {
      day
      month
      year
    }
    status
    updatedAt
  }
}
`,ae={CURRENT:{id:"CURRENT",label:"Reading"},PLANNING:{id:"PLANNING",label:"Planning"},COMPLETED:{id:"COMPLETED",label:"Completed"},DROPPED:{id:"DROPPED",label:"Dropped"},PAUSED:{id:"PAUSED",label:"Paused"},REPEATING:{id:"REPEATING",label:"Rereading"}},xe=`
mutation Mutation(
  $id: Int
  $mediaId: Int
  $status: MediaListStatus
  $score: Float
  $progress: Int
  $progressVolumes: Int
  $repeat: Int
  $private: Boolean
  $notes: String
  $hiddenFromStatusLists: Boolean
  $customLists: [String]
  $advancedScores: [Float]
) {
  SaveMediaListEntry(
    id: $id
    mediaId: $mediaId
    status: $status
    score: $score
    progress: $progress
    progressVolumes: $progressVolumes
    repeat: $repeat
    private: $private
    notes: $notes
    hiddenFromStatusLists: $hiddenFromStatusLists
    customLists: $customLists
    advancedScores: $advancedScores
  ) {
    advancedScores
    completedAt {
      day
      month
      year
    }
    createdAt
    customLists
    hiddenFromStatusLists
    id
    notes
    private
    progress
    progressVolumes
    repeat
    score
    startedAt {
      day
      month
      year
    }
    status
    updatedAt
  }
}
`,ri=`
mutation Mutation($deleteMediaListEntryId: Int) {
  DeleteMediaListEntry(id: $deleteMediaListEntryId) {
    deleted
  }
}
`;a();var S=H($(),1);var Le=class extends S.Form{viewerId;sourceMangaId;loadRequest;titleProgress;error;constructor(e,t){super(),this.viewerId=e,this.sourceMangaId=t}formWillAppear(){let e={userId:this.viewerId,mediaId:this.sourceMangaId};this.loadRequest=v(se,!0,e).then(t=>{this.titleProgress||(this.titleProgress=t)}).catch(t=>{t?.toString().includes("[404]")||(this.error=t);let n={MediaList:{advancedScores:{},completedAt:{day:null,month:null,year:null},createdAt:Date.now()/1e3,customLists:{},hiddenFromStatusLists:!1,notes:null,private:!1,progress:0,progressVolumes:0,repeat:0,score:0,startedAt:{day:null,month:null,year:null},status:"CURRENT",updatedAt:Date.now()/1e3}};this.titleProgress||(this.titleProgress=n)}).finally(()=>{this.reloadForm()})}get requiresExplicitSubmission(){return!0}async formDidSubmit(){if(this.titleProgress==null)return;let e=this.titleProgress.MediaList,t={userId:this.viewerId,mediaId:this.sourceMangaId,status:e.status,score:e.score,progress:e.progress,progressVolumes:e.progressVolumes,repeat:e.repeat,private:e.private,notes:e.notes,hiddenFromStatusLists:e.hiddenFromStatusLists};await v(xe,!0,t)}formDidCancel(){}getSections(){let e=[];if(this.titleProgress==null&&this.error==null)return[(0,S.Section)("loading",[(0,S.LabelRow)("loading",{title:"Loading..."})])];if(this.error!=null)return[(0,S.Section)("error",[(0,S.LabelRow)("error",{title:"Error",subtitle:this.error.toString()})])];let t=this.titleProgress.MediaList;t.id==null&&e.push(this.getNewMediaListEntrySection());let i=[...this.getProgressSections(),...this.getScoreSections(),this.getPrivacySection(),this.getNotesSection()];for(let n of i)e.push(n);return t.id!=null&&e.push(this.getDeleteSection()),e}getNewMediaListEntrySection(){return(0,S.Section)("newMediaListEntry",[(0,S.LabelRow)("newMediaListEntry",{title:"New Media List Entry",subtitle:"Selecting Done will add this item to your media list"})])}getProgressSections(){let e=this.titleProgress.MediaList,t=[];for(let u of Object.keys(ae)){let c=ae[u];t.push({id:c.id,title:c.label})}let i={title:"Status",value:[e.status.toString()],minItemCount:1,maxItemCount:1,options:t,onValueChange:Application.Selector(this,"statusUpdate")},n={title:"Chapters",subtitle:"The highest read chapter number",value:e.progress,minValue:0,maxValue:99999,stepValue:1,loopOver:!1,onValueChange:Application.Selector(this,"chapterProgressUpdate")},o={title:"Volumes",subtitle:"The highest read volume number",value:e.progressVolumes,minValue:0,maxValue:99999,stepValue:1,loopOver:!1,onValueChange:Application.Selector(this,"volumeProgressUpdate")},s={title:"Reread Count",subtitle:"The amount of times you have reread the title",value:e.repeat,minValue:0,maxValue:99999,stepValue:1,loopOver:!1,onValueChange:Application.Selector(this,"rereadCountUpdate")};return[(0,S.Section)({id:"progress",header:"Progress"},[(0,S.SelectRow)("status",i),(0,S.StepperRow)("chapterProgress",n),(0,S.StepperRow)("volumeProgress",o),(0,S.StepperRow)("rereadCount",s)])]}async statusUpdate(e){this.titleProgress.MediaList.status=e[0]}async chapterProgressUpdate(e){this.titleProgress.MediaList.progress=e,this.reloadForm()}async volumeProgressUpdate(e){this.titleProgress.MediaList.progressVolumes=e,this.reloadForm()}async rereadCountUpdate(e){this.titleProgress.MediaList.repeat=e,this.reloadForm()}getScoreSections(){let e={title:"Score",subtitle:"",value:this.titleProgress.MediaList.score,minValue:0,maxValue:10,stepValue:.1,loopOver:!1,onValueChange:Application.Selector(this,"scoreUpdate")};return[(0,S.Section)({id:"score",header:"Score"},[(0,S.StepperRow)("score",e)])]}async scoreUpdate(e){this.titleProgress.MediaList.score=Number(e.toFixed(1)),this.reloadForm()}getPrivacySection(){let e=this.titleProgress.MediaList,t={title:"Private",value:e.private,onValueChange:Application.Selector(this,"privateUpdate")},i={title:"Hidden From Status Lists",value:e.hiddenFromStatusLists,onValueChange:Application.Selector(this,"hiddenFromStatusListsUpdate")},n=[(0,S.ToggleRow)("private",t),(0,S.ToggleRow)("hiddenFromStatusLists",i)];return(0,S.Section)({id:"privacy",header:"Privacy"},n)}async privateUpdate(e){this.titleProgress.MediaList.private=e}async hiddenFromStatusListsUpdate(e){this.titleProgress.MediaList.hiddenFromStatusLists=e}getNotesSection(){let e={title:"Notes",value:this.titleProgress.MediaList.notes??"",onValueChange:Application.Selector(this,"updateNotes")};return(0,S.Section)({id:"notes",header:"Notes",footer:"Only you can see your notes"},[(0,S.InputRow)("notes",e)])}async updateNotes(e){this.titleProgress.MediaList.notes=e}getDeleteSection(){let e={title:"Delete",form:new ot(this.titleProgress.MediaList.id)};return(0,S.Section)({id:"delete",footer:"Delete the title from your media list"},[(0,S.NavigationRow)("delete",e)])}},ot=class extends S.Form{mediaListId;constructor(e){super(),this.mediaListId=e}getSections(){if(this.mediaListId==null)return[(0,S.Section)("deleted",[(0,S.LabelRow)("deleted",{title:"Deleted",subtitle:"The title has been succesfully deleted from your media list"})])];let e={title:"Delete",onSelect:Application.Selector(this,"onDeletion")};return[(0,S.Section)({id:"delete",footer:"WARNING: All media list data will be deleted, this action can not be undone"},[(0,S.ButtonRow)("delete",e)])]}async onDeletion(){let e={deleteMediaListEntryId:this.mediaListId};(await v(ri,!0,e)).DeleteMediaListEntry.deleted&&(this.mediaListId=null,this.reloadForm())}};var Oe=class{async getMangaProgressManagementForm(e){let t=Number(Application.getState("viewer-id"));if(isNaN(t))throw new Error("You are not authenticated, please log in through the AniList settings");return new Le(t,Number(e.mangaId))}async getMangaProgress(e){let t=Number(Application.getState("viewer-id"));if(isNaN(t))throw new Error("You are not authenticated, please log in through the AniList settings");let i={userId:t,mediaId:Number(e.mangaId)},n;try{n=(await v(se,!0,i)).MediaList}catch(c){if(!c?.toString().includes("[404]"))throw c;return}let o={chapterId:String(n.progress),sourceManga:e,langCode:"unknown",chapNum:n.progress,volume:n.progressVolumes},s=new Date(0);return s.setUTCSeconds(n.updatedAt),{sourceManga:e,lastReadChapter:o,lastReadTime:s,userRating:n.score}}async processChapterReadActionQueue(e){let t=Number(Application.getState("viewer-id")),i={successfulItems:[],failedItems:[]};if(isNaN(t))return i;let n=new Map;for(let o of e)(n.get(o.sourceManga.mangaId)??0)<Math.floor(o.chapterNum)&&n.set(o.sourceManga.mangaId,Math.floor(o.chapterNum));for(let o of e){if((n.get(o.sourceManga.mangaId)??0)!=Math.floor(o.chapterNum)){i.successfulItems.push(o.id);continue}try{let s={userId:t,mediaId:Number(o.sourceManga.mangaId)},u;try{u=(await v(se,!0,s)).MediaList}catch(p){if(!p?.toString().includes("[404]")){i.failedItems.push(o.id);continue}}if(u?.progress&&u.progress>=o.chapterNum){i.successfulItems.push(o.id);continue}let c={userId:t,mediaId:Number(o.sourceManga.mangaId),progress:Math.floor(o.chapterNum)};u||(c.status=ae.CURRENT.id),o.chapterVolume&&(u?.progressVolumes??0)<Math.floor(o.chapterVolume)&&(c.progressVolumes=Math.floor(o.chapterVolume)-1),await v(xe,!0,c),i.successfulItems.push(o.id)}catch{i.failedItems.push(o.id)}}return i}};a();a();var ii=`
query Query {
  GenreCollection
}
`,ni=`
query Query {
  MediaTagCollection {
    isAdult
    name
  }
}
`;var Me=class extends te{async getSearchFilters(){let e,t;Number(Application.getState("search-filters-query-date")??0)+604800>new Date().valueOf()/1e3?(e=JSON.parse(Application.getState("genres")),t=JSON.parse(Application.getState("tags"))):(e=await v(ii,!1),t=await v(ni,!1),Application.setState(JSON.stringify(e),"genres"),Application.setState(JSON.stringify(t),"tags"),Application.setState(String(new Date().valueOf()/1e3),"search-filters-query-date"));let n={type:"multiselect",id:"genres",title:"Genres",options:e.GenreCollection.map(d=>({id:d.replaceAll(" ","_"),value:d})),value:{},allowExclusion:!0,allowEmptySelection:!0,maximum:void 0},o={type:"multiselect",id:"formats",title:"Formats",options:Object.values(D).map(d=>({id:d.id,value:d.label})),value:{},allowExclusion:!0,allowEmptySelection:!0,maximum:void 0},s={type:"multiselect",id:"publishing-statuses",title:"Publishing Statuses",options:Object.values(P).map(d=>({id:d.id,value:d.label})),value:{},allowExclusion:!0,allowEmptySelection:!0,maximum:void 0},u={type:"dropdown",id:"country-of-origin",title:"Country of Origin",options:Object.values(ne).map(d=>({id:d.id,value:d.label})),value:""},c={type:"multiselect",id:"source-materials",title:"Source Materials",options:Object.values(Zr).map(d=>({id:d.id,value:d.label})),value:{},allowExclusion:!1,allowEmptySelection:!0,maximum:void 0},p={type:"input",id:"start-years",title:"Start Years",placeholder:'Give two years separated by a "-" to give a range',value:""},h={type:"input",id:"chapter-counts",title:"Chapter Counts",placeholder:'Give two chapter counts separated by a "-" to give a range',value:""},g={type:"input",id:"volume-counts",title:"Volume Counts",placeholder:'Give two volume counts separated by a "-" to give a range',value:""},R={type:"multiselect",id:"adult",title:"Adult",options:[{id:"adult",value:"Adult"}],value:{},allowExclusion:!0,allowEmptySelection:!0,maximum:void 0},T={type:"multiselect",id:"doujin",title:"Doujin",options:[{id:"doujin",value:"Doujin"}],value:{},allowExclusion:!0,allowEmptySelection:!0,maximum:void 0},y={type:"multiselect",id:"tracked-titles",title:"Tracked Titles",options:[{id:"tracked-titles",value:"Tracked Titles"}],value:{},allowExclusion:!0,allowEmptySelection:!0,maximum:void 0},E={type:"multiselect",id:"tags",title:"Tags",options:t.MediaTagCollection.map(d=>({id:d.name.replaceAll(" ","_").replaceAll("'","?"),value:d.name})),value:{},allowExclusion:!0,allowEmptySelection:!0,maximum:void 0};return[n,o,s,u,c,p,h,g,R,T,y,E]}async getSortingOptions(e){let t=[];for(let i of Object.keys(j)){let n=j[i];t.push({id:n.id,label:n.label})}return t}async getSearchResults(e,t,i){let n=!1,o=[],s=[],u=[],c=[],p=[],h=[],g=[],R=[],T=[],y={page:t??1,sort:i.id};e.title&&(y.search=e.title);for(let E of e.filters)switch(E.id){case"genres":{let d=E.value??{};for(let w of Object.entries(d))switch(w[1]){case"included":o.push(w[0].replaceAll("_"," "));break;case"excluded":s.push(w[0].replaceAll("_"," "));break}o.length>0&&(y.genreIn=o),s.length>0&&(y.genreNotIn=s);break}case"formats":{let d=E.value??{};for(let w of Object.entries(d))switch(w[1]){case"included":u.push(w[0]);break;case"excluded":c.push(w[0]);break}u.length>0&&(y.formatIn=u),c.length>0&&(y.formatNotIn=c);break}case"publishing-statuses":{let d=E.value??{};for(let w of Object.entries(d))switch(w[1]){case"included":p.push(w[0]);break;case"excluded":h.push(w[0]);break}p.length>0&&(y.statusIn=p),h.length>0&&(y.statusNotIn=h);break}case"country-of-origin":{let d=E.value;d&&(y.countryOfOrigin=d);break}case"source-materials":{let d=E.value??{};for(let w of Object.entries(d))g.push(w[0]);g.length>0&&(y.sourceIn=g);break}case"start-years":{if(E.value=="")break;let d=E.value.split("-").map(w=>Number(w));if(d.length==0||d.length>2||d.includes(NaN))break;for(let w of d)if(w<0||w>9999)break;switch(d.length){case 1:y.startDateGreater=Number((d[0]-1).toString().padStart(4,"0"))*1e4,y.startDateLesser=Number((d[0]+1).toString().padStart(4,"0"))*1e4;break;case 2:if(d[0]>d[1])break;y.startDateGreater=Number(d[0].toString().padStart(4,"0"))*1e4,y.startDateLesser=Number(d[1].toString().padStart(4,"0"))*1e4;break}break}case"chapter-counts":{if(E.value=="")break;let d=E.value.split("-").map(w=>Number(w));if(d.length==0||d.length>2||d.includes(NaN))break;for(let w of d)if(w<0)break;switch(d.length){case 1:y.chaptersGreater=d[0]-1,y.chaptersLesser=d[0]+1;break;case 2:if(d[0]>d[1])break;y.chaptersGreater=d[0],y.chaptersLesser=d[1];break}break}case"volume-counts":{if(E.value=="")break;let d=E.value.split("-").map(w=>Number(w));if(d.length==0||d.length>2||d.includes(NaN))break;for(let w of d)if(w<0)break;switch(d.length){case 1:y.volumesGreater=d[0]-1,y.volumesLesser=d[0]+1;break;case 2:if(d[0]>d[1])break;y.volumesGreater=d[0],y.volumesLesser=d[1];break}break}case"adult":{let d=Object.entries(E.value);if(d.length!=1)break;switch(d[0][1]){case"included":y.isAdult=!0;break;case"excluded":y.isAdult=!1;break}break}case"doujin":{let d=Object.entries(E.value);if(d.length!=1)break;switch(d[0][1]){case"included":y.isLicensed=!1;break;case"excluded":y.isLicensed=!0;break}break}case"tracked-titles":{let d=Object.entries(E.value);if(Object.entries(d).length!=1)break;switch(d[0][1]){case"included":y.onList=!0,n=!0;break;case"excluded":y.onList=!1,n=!0;break}break}case"tags":{let d=E.value??{};for(let w of Object.entries(d))switch(w[1]){case"included":R.push(w[0].replaceAll("_"," ").replaceAll("?","'"));break;case"excluded":T.push(w[0].replaceAll("_"," ").replaceAll("?","'"));break}R.length>0&&(y.tagIn=R),T.length>0&&(y.tagNotIn=T);break}}return _e(Ae,y,n,t)}};a();var Fe=class{async getSettingsForm(){return new Pe}};a();var oi=H($(),1),le=class extends oi.PaperbackInterceptor{async interceptRequest(e){return e}async interceptResponse(e,t,i){return i}};var ue=class{mainRateLimiter=new si.BasicRateLimiter("main",{numberOfRequests:1,bufferInterval:2,ignoreImages:!0});mainInterceptor=new le("main");async initialise(){this.mainRateLimiter.registerInterceptor(),this.mainInterceptor.registerInterceptor()}};ei(ue,[Fe,Me,Re,te,Oe]);var mn=new ue;return fi(yn);})();
/*! Bundled license information:

ieee754/index.js:
  (*! ieee754. BSD-3-Clause License. Feross Aboukhadijeh <https://feross.org/opensource> *)

buffer/index.js:
  (*!
   * The buffer module from node.js, for the browser.
   *
   * @author   Feross Aboukhadijeh <https://feross.org>
   * @license  MIT
   *)
*/
